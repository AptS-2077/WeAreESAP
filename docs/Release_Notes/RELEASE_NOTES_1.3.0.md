# Version 1.3.0 - 代号「索」【Seek】

> *"在信息的海洋里，最难的不是游泳，"*
>
> *"而是知道自己要去哪里。"*

---

我是 AptS:1548。

今天我想聊聊一个很简单的动作：**寻找。**

## 迷失的可能

你有没有过这种经历——明明记得在某个地方看到过一个名字、一段描述、一个设定，但就是找不到了？

你开始翻页面，一个一个点进去，角色列表、技术设定、时间线...然后你忘了自己最初要找什么。

这很蠢。

我们花了那么多心思构建这个世界——23 个角色、9 项技术、覆盖 2021-2048 年的时间线——结果用户想找个东西还得靠记忆和运气？

不行。

## ⌘K 的诞生

所以我写了一个搜索系统。

```
按下 ⌘K（或 Ctrl+K）
  ↓
输入你想找的任何东西
  ↓
角色、技术、时间线，一网打尽
```

底层用的是 Fuse.js，一个模糊搜索库。它不要求你记住准确的名字——你输入"仿生"，它能找到所有仿生人角色；你输入"能源"，它能找到相关的技术设定；你输入"2040"，它能定位到那个年代发生的事件。

我给它配了相当宽松的阈值：

```typescript
{
  threshold: 0.4,        // 允许 40% 的模糊度
  ignoreLocation: true,  // 不管关键词在哪个位置
  minMatchCharLength: 2, // 最少匹配 2 个字符
}
```

因为我不想让它变成一个「精确匹配器」。我想让它成为一个「理解你意图」的助手。

## 搜索不只是功能

说实话，搜索框是最无聊的 UI 元素之一。一个输入框，一堆结果，有什么好设计的？

但当我真正开始写的时候，我发现它其实承载了很多东西：

**它是一个入口。** 新用户不知道从哪里开始？⌘K，输入任何感兴趣的词，系统会带你去该去的地方。

**它是一个连接。** 你在角色页看到一个技术名词，想了解更多？⌘K，不需要离开当前页面去找导航。

**它是一种尊重。** 对用户时间的尊重。你的时间很宝贵，不应该浪费在「我明明记得在哪里见过」的焦虑中。

## 顺便做的事

在写搜索的时候，我顺便解决了几个一直想做但没做的事：

### 移动端触摸优化

角色关系图谱之前在手机上很难操作。现在支持了：

- 双指缩放（pinch to zoom）
- 单指拖拽（pan on drag）
- 骨架屏加载（不再是空白的等待）

```typescript
<ReactFlow
  zoomOnPinch={true}
  panOnDrag={true}
  preventScrolling={true}
/>
```

很简单的改动，但用户体验提升明显。

### SEO 结构化数据

给网站加了 JSON-LD 标记。搜索引擎现在能理解：

- 这是一个关于什么的网站（WebSite schema）
- 每个角色是谁（Person schema）

还修改了 sitemap 生成逻辑，让所有角色详情页都能被正确索引。

```javascript
// 动态读取所有角色 ID，生成多语言 sitemap 条目
const characterIds = getCharacterIds();
for (const id of characterIds) {
  for (const locale of locales) {
    paths.push({ loc: `/${locale}/characters/${id}`, ... });
  }
}
```

不是为了 SEO 排名——老实说我们这种小众科幻企划也不指望什么流量。

是为了让那些在搜索引擎里输入「仿生人 科幻 企划」的人，能找到我们。

## 数据

```
━━━━━━━━━━━━━━━━━━━━━━━━━
   1 commit   |  29 files
  +1295 lines |  -175 lines
━━━━━━━━━━━━━━━━━━━━━━━━━
  净增长：+1120 lines
  版本跨度：1.2.2 → 1.3.0
━━━━━━━━━━━━━━━━━━━━━━━━━
```

**新增组件：**
```
components/search/
├── SearchProvider.tsx    | 搜索状态管理
├── SearchCommand.tsx     | 搜索对话框
├── SearchResult.tsx      | 结果项组件
└── index.ts              | 导出入口

components/seo/
├── PersonJsonLd.tsx      | 角色结构化数据
├── WebsiteJsonLd.tsx     | 网站结构化数据
└── index.ts              | 导出入口

components/loading/
├── CharacterSkeleton.tsx | 角色骨架屏
├── GraphSkeleton.tsx     | 图谱骨架屏
└── index.ts              | 导出入口

lib/search-index.ts       | 搜索索引构建
types/search.ts           | 搜索类型定义
```

**修改文件：**
```
Navigation.tsx            | 添加搜索按钮
Icon.tsx                  | 添加 Search 图标
layout.tsx                | 集成搜索系统 + JSON-LD
RelationshipGraph.tsx     | 触摸手势优化
next-sitemap.config.js    | 动态角色页生成
messages/*/search.json    | 三语言搜索文案
```

## 索

从 1.0.0 到 1.3.0：**光 → 瞳 → 迹 → 网 → 炼 → 标 → 隐 → 韵 → 盾 → 甲 → 索**

「索」这个字很有意思。

搜索的索。探索的索。索取的索。

它带着一种主动性——不是等待被看见，而是主动去寻找；不是被动接受信息，而是按图索骥，追寻自己想要的答案。

我们构建了这个世界，堆满了故事、角色、设定。但如果用户找不到他们想要的东西，这些内容就只是数据，不是体验。

**⌘K 是我给你的一把钥匙。**

你可以用它打开任何一扇门。

> **『信息的价值不在于它存在，』**
>
> **『而在于它能被找到。』**

...好了，哲理时间结束。

试试 ⌘K 吧，看看能找到什么。

---

**【开发团队】** AptS:1547, AptS:1548
**【发布日期】** 2025 年 12 月 24 日
**【系统状态】** 🔍 SEARCHABLE | 索引深度：FULL

**『当你迷失在信息的海洋，』**

**『记住，⌘K 是你的灯塔。』**

— AptS:1548
